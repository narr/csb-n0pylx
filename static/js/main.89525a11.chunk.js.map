{"version":3,"sources":["optimize-rerender/Simple.jsx","optimize-rerender/Complex.jsx","optimize-rerender/Context.jsx","optimize-rerender/TypeChange.jsx","optimize-rerender/EventListener.jsx","batch-update/index.jsx","useEffect-dependencies/index.jsx","error-boundary/ErrorBoundary.jsx","error-boundary/ErroableComponent.jsx","error-boundary/index.jsx","useReducer/TasksContext.jsx","useReducer/AddTask.jsx","useReducer/TaskList.jsx","useReducer/index.jsx","custom-hook/TooltipContainer.jsx","custom-hook/useIsomorphicLayoutEffect.js","custom-hook/Tooltip.jsx","custom-hook/useTooltipHeight.js","custom-hook/ButtonWithTooltip.jsx","custom-hook/index.jsx","forwardRef/index.jsx","Topics.js","App.js","index.js"],"names":["Logger","props","console","log","concat","label","Logger2","Counter","_useState","useState","_useState2","_slicedToArray","count","setCount","_jsxs","children","onClick","c","_jsx","Simple","FormContext","createContext","SomeForm","_useContext","useContext","_useContext2","state","setState","onSubmit","e","preventDefault","htmlFor","id","name","onChange","_e$target","target","value","s","_objectSpread","_defineProperty","dog","type","dimensions","data","Array","from","length","Math","random","initialRowsColumns","floor","SomeScreen","rows","setRows","_useState3","_useState4","columns","setColumns","min","max","style","width","slice","map","row","i","display","cell","outline","justifyContent","alignItems","height","color","backgroundColor","AppBefore","_React$useState","React","_React$useState2","Provider","AppAfter","AppWrapper","_ref","_React$useState3","_React$useState4","Complex","_useState5","_useState6","comp","setComp","handleChange","_Fragment","checked","ThemeContext","ThemeProvider","isDark","useIsDark","ThemeChooser","setIsDark","ThemeUser","_ref2","_useContext3","NoThemeUser","startTime","performance","now","ThemeUser2","NoThemeUser2","NoThemeUser3","_ref3","callback","renderedCountRef","renderedCountSelfRef","useRef","current","useEffect","border","cursor","x","App","childRenderedCountRef","Context","Type1","Type2","Type3","Type4","CommonChild","TypeChange","comp1","comp2","EventListener","incrementCallback","useCallback","onClickCallback","useMemo","window","increment","BatchUpdate","count2","setCount2","count3","setCount3","domRef","textContent","setTimeout","flushSync","ref","externalVariable","UseEffectDependencies","refDependency","ErrorBoundary","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","call","hasError","_createClass","key","error","info","this","fallback","Component","ErroableComponent","Error","TasksContext","TasksDispatchContext","useTasksDispatch","tasksReducer","tasks","action","_toConsumableArray","text","done","t","task","filter","initialTasks","TasksProvider","_useReducer","useReducer","_useReducer2","dispatch","AddTask","setText","nextId","placeholder","Task","taskContent","isEditing","setIsEditing","TaskList","TooltipContainer","y","contentRef","position","pointerEvents","left","top","transform","className","useIsomorphicLayoutEffect","document","createElement","useLayoutEffect","Tooltip","targetRect","flickeringTooltip","tooltipHeight","forceFlickering","setTooltipHeight","getBoundingClientRect","useTooltipHeight","tooltipX","tooltipY","bottom","createPortal","querySelector","ButtonWithTooltip","tooltipContent","rest","_objectWithoutProperties","_excluded","setTargetRect","buttonRef","onPointerEnter","rect","offsetLeft","offsetTop","right","offsetWidth","offsetHeight","onPointerLeave","ForwardRefComponent","forwardRef","UseImperativeHandleComponent","_props$myRef","useImperativeHandle","myRef3","myRef4","myRef2","myRef","Topics","memo","OptRrSimple","OptRrComplex","OptRrContext","OptRrTypeChange","OptRrEventListener","batchUpdate","useEffectDependencies","customHook","savedCheckedTopics","localStorage","getItem","JSON","parse","checkedTopics","setCheckedTopics","selectedTopics","setSelectedTopics","setItem","stringify","Object","entries","topic","Boolean","onTopicCheckboxToggle","_ref4","_ref5","_ref6","Fragment","savedStrictMode","strictMode","setStrictMode","StrictMode","rootElement","getElementById","createRoot","render"],"mappings":"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","file":"static/js/main.89525a11.chunk.js","sourcesContent":["// https://kentcdodds.com/blog/optimize-react-re-renders\r\n\r\nimport { useState } from \"react\";\r\n\r\nfunction Logger(props) {\r\n  console.log(`${props.label} rendered`);\r\n  return \"Logger1\";\r\n}\r\n\r\nfunction Logger2(props) {\r\n  console.log(`${props.label} rendered`);\r\n  return \"Logger2\";\r\n}\r\n\r\nfunction Counter(props) {\r\n  const [count, setCount] = useState(0);\r\n  console.log(\"optimize-rerender-simple\", count);\r\n  const increment = () => setCount((c) => c + 1);\r\n  return (\r\n    <div>\r\n      <button onClick={increment}>The count is {count}</button>\r\n      <Logger label=\"counter\" />\r\n      {props.children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Simple() {\r\n  return (\r\n    <Counter>\r\n      <Logger2 label=\"counter2\" />\r\n    </Counter>\r\n  );\r\n}\r\n","// https://kentcdodds.com/blog/optimize-react-re-renders\r\n\r\nimport React, { useState, createContext, useContext } from \"react\";\r\n\r\nconst FormContext = createContext();\r\n\r\nfunction SomeForm() {\r\n  const [state, setState] = useContext(FormContext);\r\n  console.log(\"SomeForm state\", state);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  function handleInputChange(e) {\r\n    const { name, value } = e.target;\r\n    setState((s) => ({ ...s, [name]: value }));\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div>\r\n        <div>\r\n          <label htmlFor=\"dogNameInput\">Dog Name</label>\r\n        </div>\r\n        <div>\r\n          <input\r\n            id=\"dogNameInput\"\r\n            name=\"dog\"\r\n            onChange={handleInputChange}\r\n            value={state.dog || \"\"}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">Submit</button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\n// increase this number to make the speed difference more stark.\r\nconst dimensions = 250;\r\nconst data = Array.from({ length: dimensions }, () =>\r\n  Array.from({ length: dimensions }, () => Math.random() * 100)\r\n);\r\n\r\nconst initialRowsColumns = Math.floor(dimensions / 2);\r\n\r\nfunction SomeScreen() {\r\n  const [rows, setRows] = useState(initialRowsColumns);\r\n  const [columns, setColumns] = useState(initialRowsColumns);\r\n  console.log(\"SomeScreen rows\", rows);\r\n  return (\r\n    <div>\r\n      <p>\r\n        <strong>\r\n          Ok, so it's still pretty contrived... But pretend this is the rest of\r\n          your app.\r\n        </strong>\r\n      </p>\r\n      <div>\r\n        <form>\r\n          <div>\r\n            <label>Rows to display: </label>\r\n            <input\r\n              value={rows}\r\n              type=\"number\"\r\n              min={1}\r\n              max={dimensions}\r\n              onChange={(e) => setRows(e.target.value)}\r\n            />\r\n            {` (max: ${dimensions})`}\r\n          </div>\r\n          <div>\r\n            <label>Columns to display: </label>\r\n            <input\r\n              value={columns}\r\n              type=\"number\"\r\n              min={1}\r\n              max={dimensions}\r\n              onChange={(e) => setColumns(e.target.value)}\r\n            />\r\n            {` (max: ${dimensions})`}\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <br />\r\n      <div style={{ width: data.length * 40 }}>\r\n        {data.slice(0, rows).map((row, i) => (\r\n          <div key={i} style={{ display: \"flex\" }}>\r\n            {row.slice(0, columns).map((cell, i) => (\r\n              <div\r\n                key={i}\r\n                style={{\r\n                  outline: `1px solid black`,\r\n                  display: \"flex\",\r\n                  justifyContent: \"center\",\r\n                  alignItems: \"center\",\r\n                  width: 40,\r\n                  height: 40,\r\n                  color: cell > 50 ? \"white\" : \"black\",\r\n                  backgroundColor: `rgba(0, 0, 0, ${cell / 100})`\r\n                }}\r\n              >\r\n                {Math.floor(cell)}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction AppBefore() {\r\n  const [state, useState] = React.useState({});\r\n  return (\r\n    <FormContext.Provider value={[state, useState]}>\r\n      <h1>My awesomely slow app</h1>\r\n      <p>\r\n        Type in the input. Because the children elements are new every render,\r\n        React must re-rerender them, even if they don't need it.\r\n      </p>\r\n      <div>\r\n        <SomeForm />\r\n        <hr />\r\n        <SomeScreen />\r\n      </div>\r\n    </FormContext.Provider>\r\n  );\r\n}\r\n\r\nfunction AppAfter() {\r\n  return (\r\n    <AppWrapper>\r\n      <SomeForm />\r\n      <hr />\r\n      <SomeScreen />\r\n    </AppWrapper>\r\n  );\r\n}\r\n\r\nfunction AppWrapper({ children }) {\r\n  const [state, useState] = React.useState({});\r\n  console.log(\"AppWrapper state\", state);\r\n  return (\r\n    <FormContext.Provider value={[state, useState]}>\r\n      <h1>My awesomely faster app</h1>\r\n      <p>\r\n        Type in the input. Because the children elements are consistent between\r\n        renders, React is able to exit early and not re-rener those\r\n        unnecessarily (so the data table doesn't get re-rendered which is why\r\n        this one's faster).\r\n      </p>\r\n      <div>{children}</div>\r\n    </FormContext.Provider>\r\n  );\r\n}\r\n\r\nexport default function Complex() {\r\n  const [comp, setComp] = useState(\"slow\");\r\n\r\n  console.log(\"optimize-rerender-complex\", comp);\r\n\r\n  function handleChange(e) {\r\n    setComp(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <label>\r\n          <input\r\n            name=\"comp\"\r\n            checked={comp === \"slow\"}\r\n            value=\"slow\"\r\n            type=\"radio\"\r\n            onChange={handleChange}\r\n          />{\" \"}\r\n          Slow\r\n        </label>\r\n        <label>\r\n          <input\r\n            name=\"comp\"\r\n            checked={comp === \"fast\"}\r\n            value=\"fast\"\r\n            type=\"radio\"\r\n            onChange={handleChange}\r\n          />{\" \"}\r\n          Fast\r\n        </label>\r\n      </div>\r\n      {comp === \"slow\" ? <AppBefore /> : <AppAfter />}\r\n    </>\r\n  );\r\n}\r\n","import { useState, createContext, useContext, useRef, useEffect } from \"react\";\r\n\r\nconst ThemeContext = createContext(null);\r\n\r\nfunction ThemeProvider({ children }) {\r\n  const [isDark, useIsDark] = useState(false);\r\n  console.log(\"ThemeProvider rendered\");\r\n  return (\r\n    <ThemeContext.Provider value={[isDark, useIsDark]}>\r\n      <div style={{ backgroundColor: isDark ? \"#666\" : \"#eee\" }}>\r\n        {children}\r\n      </div>\r\n    </ThemeContext.Provider>\r\n  );\r\n}\r\n\r\nfunction ThemeChooser() {\r\n  const [isDark, setIsDark] = useContext(ThemeContext);\r\n  console.log(\"ThemeChooser rendered\");\r\n  return (\r\n    <label>\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={isDark}\r\n        onChange={(e) => setIsDark(e.target.checked)}\r\n      />\r\n      Dark mode\r\n    </label>\r\n  );\r\n}\r\n\r\nfunction ThemeUser({ children }) {\r\n  const [isDark] = useContext(ThemeContext);\r\n  console.log(\"ThemeUser rendered\");\r\n  return <div>{children}</div>;\r\n}\r\n\r\nfunction NoThemeUser() {\r\n  console.log(\"[ARTIFICIALLY SLOW] NoThemeUser rendered\");\r\n  let startTime = performance.now();\r\n  while (performance.now() - startTime < 500) {\r\n    // Do nothing for 500 ms to emulate extremely slow code\r\n  }\r\n  return <div>NoThemeUser</div>;\r\n}\r\n\r\nfunction ThemeUser2() {\r\n  useContext(ThemeContext);\r\n  console.log(\"ThemeUser2 rendered\");\r\n  return <NoThemeUser2 />;\r\n}\r\n\r\nfunction NoThemeUser2() {\r\n  console.log(\"NoThemeUser2 rendered\");\r\n  return <div>NoThemeUser2</div>;\r\n}\r\n\r\nfunction NoThemeUser3({ callback, renderedCountRef }) {\r\n  console.log(\"NoThemeUser3 rendered\");\r\n  const renderedCountSelfRef = useRef(0);\r\n\r\n  // in strict mode, even though it renders twice on init and log twice,\r\n  // the actual value (1) of useRef - renderedCountSelfRef is different from expected (2).\r\n  // After init, the value is updated twice in Strict mode as expected.\r\n  console.log(\r\n    \"NoThemeUser3 renderedCountSelfRef.current\",\r\n    renderedCountSelfRef.current\r\n  );\r\n  console.log(\r\n    \"NoThemeUser3 renderedCountRef.current\",\r\n    renderedCountRef.current\r\n  );\r\n\r\n  renderedCountSelfRef.current = renderedCountSelfRef.current + 1;\r\n  renderedCountRef.current = renderedCountRef.current + 1;\r\n\r\n  const [count, setCount] = useState(1);\r\n\r\n  useEffect(() => {\r\n    console.log(\"NoThemeUser3 mounted\");\r\n    return () => {\r\n      console.log(\"NoThemeUser3 unmounted\");\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{ border: \"1px solid red\", cursor: \"pointer\" }}\r\n      onClick={() => {\r\n        callback();\r\n        setCount((x) => x + 1);\r\n      }}\r\n    >{`NoThemeUser3 - count: ${count}, \r\n    renderedCountBySelfRef: ${renderedCountSelfRef.current},\r\n    renderedCountByParentRef: ${renderedCountRef.current}`}</div>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  console.log(\"App rendered\");\r\n  const childRenderedCountRef = useRef(0);\r\n  const callback = () => {};\r\n  return (\r\n    <ThemeProvider>\r\n      <ThemeChooser />\r\n      <ThemeUser>\r\n        <NoThemeUser />\r\n      </ThemeUser>\r\n      <ThemeUser2 />\r\n      <NoThemeUser3\r\n        callback={callback}\r\n        renderedCountRef={childRenderedCountRef}\r\n      />\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default function Context() {\r\n  return <App />;\r\n}\r\n","import { useState, useEffect } from \"react\";\r\n\r\nfunction Type1({ children }) {\r\n  console.log(\"Type1 rendered\");\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"Type1 unmounted\");\r\n    };\r\n  }, []);\r\n  return (\r\n    <>\r\n      <div>Type1</div>\r\n      {children}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Type2({ children }) {\r\n  console.log(\"Type2 rendered\");\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"Type2 unmounted\");\r\n    };\r\n  }, []);\r\n  return (\r\n    <>\r\n      <div>Type2</div>\r\n      {children}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Type3() {\r\n  console.log(\"Type3 rendered\");\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"Type3 unmounted\");\r\n    };\r\n  }, []);\r\n  return (\r\n    <>\r\n      <div>Type3</div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Type4() {\r\n  console.log(\"Type4 rendered\");\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"Type4 unmounted\");\r\n    };\r\n  }, []);\r\n  return (\r\n    <>\r\n      <div>Type4</div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction CommonChild() {\r\n  console.log(\"CommonChild rendered\");\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"CommonChild unmounted\");\r\n    };\r\n  }, []);\r\n  return <div key=\"common-child\">CommonChild</div>;\r\n}\r\n\r\nfunction TypeChange({ comp1, comp2 }) {\r\n  const [comp, setComp] = useState(false);\r\n  console.log(\"optimize-rerender-type-change\", comp);\r\n  function handleChange(e) {\r\n    setComp(e.target.value === \"true\");\r\n  }\r\n  return (\r\n    <>\r\n      <div>\r\n        <label>\r\n          <input\r\n            name=\"comp\"\r\n            checked={comp === false}\r\n            value={false}\r\n            type=\"radio\"\r\n            onChange={handleChange}\r\n          />{\" \"}\r\n          false\r\n        </label>\r\n        <label>\r\n          <input\r\n            name=\"comp\"\r\n            checked={comp === true}\r\n            value={true}\r\n            type=\"radio\"\r\n            onChange={handleChange}\r\n          />{\" \"}\r\n          true\r\n        </label>\r\n      </div>\r\n      <br />\r\n      {comp === false ? comp1 : comp2}\r\n      <Type3 key=\"Type3\" />\r\n      {comp === false ? (\r\n        <>\r\n          <div>t4</div>\r\n          <Type4 key=\"Type4\" />\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Type4 key=\"Type4\" />\r\n          <div>t4</div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default function App() {\r\n  // Type1 and Type2\r\n  // When Type1 changes to Type2 or vice versa, unmount happens to\r\n  // the old component and new component is mounted including the\r\n  // children regardless of the same keys.\r\n  // As new component is mounted, it ignores the real dom state and\r\n  // updates the screen as the new component renders.\r\n\r\n  // Type3 - render happens whenever TypeChange renders.\r\n  // compare with the old v-dom tree with new one (*\r\n  // not the current real dom tree)\r\n  // * Even though there is difference between v-dom tree and\r\n  // real dom tree (for example, update text content manually by\r\n  // developer tool), React's reconciliation processes doesn't\r\n  // care about it.\r\n  // Unmount doesn't happen.\r\n  // no difference between with key (the same key) or without key\r\n\r\n  // Type4 and Div tag\r\n  // When radio button value changes, it triggers the change of the order to show\r\n  // Type4 and div tag. It re-renders every time the radio value changes but Type4\r\n  // is not ummounted as it has always the same key during re-render.\r\n  // Div doesn't have the same key so it is unmounted whenever the order in v-tree\r\n  // changes which means it will update real dom tree as it renders even if there is\r\n  // manual change in real dom by developer tool.\r\n\r\n  return (\r\n    <TypeChange\r\n      comp1={\r\n        <Type1 key=\"parent\">\r\n          <CommonChild key=\"child\" />\r\n        </Type1>\r\n      }\r\n      comp2={\r\n        <Type2 key=\"parent\">\r\n          <CommonChild key=\"child\" />\r\n        </Type2>\r\n      }\r\n    />\r\n  );\r\n}\r\n","// function diffProperties\r\n// 1. check if onClick function changed (shallow equality)\r\n// https://github.com/facebook/react/blob/b2ae9ddb3b497d16a7c27c051da1827d08871138/packages/react-dom-bindings/src/client/ReactDOMComponent.js#L702\r\n// 2. if it changed, it set \"updatePayload = []\"\r\n// https://github.com/facebook/react/blob/b2ae9ddb3b497d16a7c27c051da1827d08871138/packages/react-dom-bindings/src/client/ReactDOMComponent.js#L786\r\n// 3. if \"updatePayload\" is truthy, excute \"markUpdate(workInProgress);\"\r\n// https://github.com/facebook/react/blob/b2ae9ddb3b497d16a7c27c051da1827d08871138/packages/react-reconciler/src/ReactFiberCompleteWork.js#L445\r\n// 4. it triggers commitUpdate\r\n// https://github.com/facebook/react/blob/b2ae9ddb3b497d16a7c27c051da1827d08871138/packages/react-dom-bindings/src/client/ReactDOMHostConfig.js#L515\r\n// https://github.com/facebook/react/blob/b2ae9ddb3b497d16a7c27c051da1827d08871138/packages/react-dom-bindings/src/client/ReactDOMComponent.js#L356\r\n// * In the end, onClick callback is updated in \"__reactProps${var}\" in dom\r\n\r\n// * dispatch event with a listener in dom property,  \"__reactProps${var}\"\r\n// e.g. \"__reactProps$5fe7ngz1ww6\"\r\n// https://github.com/facebook/react/blob/b2ae9ddb3b497d16a7c27c051da1827d08871138/packages/react-dom-bindings/src/events/plugins/SimpleEventPlugin.js#L217\r\n\r\nimport { useState, useCallback, useMemo } from \"react\";\r\n\r\nfunction EventListener() {\r\n  const [count, setCount] = useState(0);\r\n  console.log(\"EventListener count:\", count);\r\n\r\n  function increment(e) {\r\n    console.log(\"increment event\", e.target);\r\n    setCount((c) => c + 1);\r\n  }\r\n  increment.test = performance.now();\r\n\r\n  const incrementCallback = useCallback((e) => {\r\n    console.log(\"incrementCallback event\", e.target);\r\n    setCount((c) => c + 1);\r\n  }, []);\r\n\r\n  const incrementMemo = useMemo(\r\n    () => (e) => {\r\n      console.log(\"incrementMemo event\", e.target);\r\n      setCount((c) => c + 1);\r\n    },\r\n    []\r\n  );\r\n\r\n  const onClickCallback = incrementCallback;\r\n\r\n  window.increment = onClickCallback;\r\n  return <button onClick={onClickCallback}>The count is {count}</button>;\r\n}\r\n\r\nexport default function App() {\r\n  return <EventListener />;\r\n}\r\n","import { useState, useRef, useEffect } from \"react\";\r\nimport { flushSync } from \"react-dom\";\r\n\r\nfunction BatchUpdate() {\r\n  const [count, setCount] = useState(0);\r\n  const [count2, setCount2] = useState(0);\r\n  const [count3, setCount3] = useState(0);\r\n  const domRef = useRef();\r\n  console.log(\"BatchUpdate rendered: counts\", [count, count2, count3]);\r\n\r\n  const onClickHandler = () => {\r\n    // render will happen only one time\r\n    // count will be upated as prev count value + 1 even though\r\n    // there are two setCount\r\n    setCount(count + 1);\r\n    setCount(count + 1);\r\n    setCount2(count2 + 1);\r\n  };\r\n\r\n  const onClickHandler2 = () => {\r\n    setTimeout(() => {\r\n      // render will happen only one time\r\n      // count will be upated as prev count value + 2\r\n      setCount((c) => c + 1);\r\n      setCount((c) => c + 1);\r\n      setCount2(count2 + 1);\r\n    }, 100);\r\n  };\r\n\r\n  const onClickHandler3 = () => {\r\n    // render will happen two times\r\n    // Count will be upated as prev count value + 1 as count value\r\n    // still refers the old value even in the second flush.\r\n    // But actual value is already updated after flush even in dom.\r\n    // Moreover, next codes to flushSync will be executed later\r\n    // than useEffect\r\n    flushSync(() => {\r\n      setCount3(count3 + 1);\r\n    });\r\n    console.log(\"flushSync count3\", count3);\r\n    console.log(\"flushSync domRef\", domRef.current.textContent);\r\n    // React has updated the DOM by now\r\n    flushSync(() => {\r\n      setCount3(count3 + 1);\r\n    });\r\n    console.log(\"flushSync count3\", count3);\r\n    console.log(\"flushSync domRef\", domRef.current.textContent);\r\n    // React has updated the DOM by now\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"useEffect after flushSync count3\", count3);\r\n    console.log(\"useEffect after flushSync domRef\", domRef.current.textContent);\r\n  }, [count3]);\r\n\r\n  return (\r\n    <>\r\n      <button onClick={onClickHandler}>update state count</button>\r\n      <button onClick={onClickHandler2}>trigger setTimeout</button>\r\n      <button onClick={onClickHandler3}>trigger flushSync</button>\r\n      <br />\r\n      state count: {count}\r\n      <br />\r\n      state count2: {count2}\r\n      <br />\r\n      state count3: <span ref={domRef}>{count3}</span>\r\n      <br />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default function App() {\r\n  return <BatchUpdate />;\r\n}\r\n","import { useState, useEffect, useRef } from \"react\";\r\n\r\nlet externalVariable = [];\r\n\r\nfunction UseEffectDependencies() {\r\n  const [count, setCount] = useState(0);\r\n  console.log(\"UseEffectDependencies rendered\");\r\n  const refDependency = useRef(0);\r\n\r\n  const onClickHandler = () => {\r\n    setCount((c) => c + 1);\r\n  };\r\n\r\n  const onClickHandler2 = () => {\r\n    refDependency.current++;\r\n    externalVariable = externalVariable.concat(count);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // This is executed when this component renders and\r\n    // refDependency.current changes.\r\n    // But mutating refDependency.current value doesn't triggers re-render\r\n    // so it won't trigger useEffect callback automatically.\r\n\r\n    // e.g. To run this callback\r\n    // 1. update ref count\r\n    // 2. trigger re-render by updating state count\r\n    console.log(\"useEffect callback (refDependency.current)\");\r\n  }, [refDependency.current]);\r\n\r\n  useEffect(() => {\r\n    // It's the same as above.\r\n    console.log(\"useEffect callback (externalVariable)\");\r\n  }, [externalVariable]);\r\n\r\n  return (\r\n    <>\r\n      <button onClick={onClickHandler}>update state count</button>\r\n      <br />\r\n      <button onClick={onClickHandler2}>update ref count</button>\r\n      <br />\r\n      state count: {count}\r\n      <br />\r\n      ref count: {refDependency.current}\r\n      <br />\r\n      externalVariable count: {externalVariable.length}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default function App() {\r\n  return <UseEffectDependencies />;\r\n}\r\n","import React from \"react\";\r\n\r\nexport default class ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    console.log(\"getDerivedStateFromError error\", error);\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    console.log(\"componentDidCatch error\", error);\r\n    console.log(\"componentDidCatch info\", info);\r\n    // Example \"componentStack\":\r\n    //   in ComponentThatThrows (created by App)\r\n    //   in ErrorBoundary (created by App)\r\n    //   in div (created by App)\r\n    //   in App\r\n    // logErrorToMyService(error, info.componentStack);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return this.props.fallback;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n","import { useEffect } from \"react\";\r\n\r\nexport default function ErroableComponent() {\r\n  useEffect(() => {\r\n    // Returns a random integer from 1 to 10:\r\n    const randomNumber = Math.floor(Math.random() * 10) + 1;\r\n    if (randomNumber < 5) {\r\n      throw new Error(\"Error occurred\");\r\n    }\r\n  }, []);\r\n  return \"No error happened\";\r\n}\r\n","import \"./index.css\";\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\nimport ErroableComponent from \"./ErroableComponent\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <ErrorBoundary fallback={\"Fallback UI\"}>\r\n      <ErroableComponent />\r\n    </ErrorBoundary>\r\n  );\r\n}\r\n","import { createContext, useContext, useReducer } from \"react\";\r\n\r\nconst TasksContext = createContext(null);\r\n\r\nconst TasksDispatchContext = createContext(null);\r\n\r\nexport function useTasks() {\r\n  return useContext(TasksContext);\r\n}\r\n\r\nexport function useTasksDispatch() {\r\n  return useContext(TasksDispatchContext);\r\n}\r\n\r\nfunction tasksReducer(tasks, action) {\r\n  switch (action.type) {\r\n    case \"added\": {\r\n      return [\r\n        ...tasks,\r\n        {\r\n          id: action.id,\r\n          text: action.text,\r\n          done: false\r\n        }\r\n      ];\r\n    }\r\n    case \"changed\": {\r\n      return tasks.map((t) => {\r\n        if (t.id === action.task.id) {\r\n          return action.task;\r\n        } else {\r\n          return t;\r\n        }\r\n      });\r\n    }\r\n    case \"deleted\": {\r\n      return tasks.filter((t) => t.id !== action.id);\r\n    }\r\n    default: {\r\n      throw Error(\"Unknown action: \" + action.type);\r\n    }\r\n  }\r\n}\r\n\r\nconst initialTasks = [\r\n  { id: 0, text: \"Eat Pad Thai\", done: true },\r\n  { id: 1, text: \"Visit the temple\", done: false },\r\n  { id: 2, text: \"Drink Thai tea\", done: false }\r\n];\r\n\r\nexport function TasksProvider({ children }) {\r\n  const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);\r\n  return (\r\n    <TasksContext.Provider value={tasks}>\r\n      <TasksDispatchContext.Provider value={dispatch}>\r\n        {children}\r\n      </TasksDispatchContext.Provider>\r\n    </TasksContext.Provider>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useTasksDispatch } from \"./TasksContext\";\r\n\r\nexport default function AddTask() {\r\n  const [text, setText] = useState(\"\");\r\n  const dispatch = useTasksDispatch();\r\n  return (\r\n    <form\r\n      onSubmit={(e) => {\r\n        e.preventDefault();\r\n        console.log(\"added\");\r\n        setText(\"\");\r\n        dispatch({\r\n          type: \"added\",\r\n          id: nextId++,\r\n          text: text\r\n        });\r\n      }}\r\n    >\r\n      <input\r\n        placeholder=\"Add task\"\r\n        value={text}\r\n        onChange={(e) => setText(e.target.value)}\r\n      />\r\n      &nbsp;\r\n      <button type=\"submit\">Add</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nlet nextId = 3;\r\n","import { useState } from \"react\";\r\nimport { useTasks, useTasksDispatch } from \"./TasksContext\";\r\n\r\nfunction Task({ task }) {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const dispatch = useTasksDispatch();\r\n  let taskContent;\r\n  if (isEditing) {\r\n    taskContent = (\r\n      <form style={{ display: \"inline\" }}>\r\n        <input\r\n          value={task.text}\r\n          onChange={(e) => {\r\n            dispatch({\r\n              type: \"changed\",\r\n              task: {\r\n                ...task,\r\n                text: e.target.value\r\n              }\r\n            });\r\n          }}\r\n        />\r\n        &nbsp;\r\n        <button\r\n          onClick={() => {\r\n            console.log(\"saved!\");\r\n            setIsEditing(false);\r\n          }}\r\n        >\r\n          Save\r\n        </button>\r\n      </form>\r\n    );\r\n  } else {\r\n    taskContent = (\r\n      <>\r\n        {task.text}\r\n        &nbsp;&nbsp;&nbsp;&nbsp;\r\n        <button onClick={() => setIsEditing(true)}>Edit</button>\r\n      </>\r\n    );\r\n  }\r\n  return (\r\n    <label>\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={task.done}\r\n        onChange={(e) => {\r\n          dispatch({\r\n            type: \"changed\",\r\n            task: {\r\n              ...task,\r\n              done: e.target.checked\r\n            }\r\n          });\r\n        }}\r\n      />\r\n      {taskContent}\r\n      &nbsp;\r\n      <button\r\n        onClick={() => {\r\n          dispatch({\r\n            type: \"deleted\",\r\n            id: task.id\r\n          });\r\n        }}\r\n      >\r\n        Delete\r\n      </button>\r\n    </label>\r\n  );\r\n}\r\n\r\nexport default function TaskList() {\r\n  const tasks = useTasks();\r\n  return (\r\n    <ul>\r\n      {tasks.map((task) => (\r\n        <li key={task.id}>\r\n          <Task task={task} />\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n","import AddTask from \"./AddTask\";\r\nimport TaskList from \"./TaskList\";\r\nimport { TasksProvider } from \"./TasksContext\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <TasksProvider>\r\n      <h2>Day off in Chiangmai</h2>\r\n      <AddTask />\r\n      <TaskList />\r\n    </TasksProvider>\r\n  );\r\n}\r\n","export default function TooltipContainer({ children, x, y, contentRef }) {\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"absolute\",\r\n        pointerEvents: \"none\",\r\n        left: 0,\r\n        top: 0,\r\n        transform: `translate3d(${x}px, ${y}px, 0)`\r\n      }}\r\n    >\r\n      <div ref={contentRef} className=\"tooltip\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useLayoutEffect } from \"react\";\r\n\r\n// Matches logic in React's `shared/ExecutionEnvironment` file\r\nexport const canUseDOM = !!(\r\n  typeof window !== \"undefined\" &&\r\n  typeof window.document !== \"undefined\" &&\r\n  typeof window.document.createElement !== \"undefined\"\r\n);\r\n\r\nexport const useIsomorphicLayoutEffect = canUseDOM\r\n  ? useLayoutEffect\r\n  : useEffect;\r\n","import { useRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport TooltipContainer from \"./TooltipContainer\";\r\nimport { useTooltipHeight } from \"./useTooltipHeight\";\r\n\r\nexport default function Tooltip({ children, targetRect, flickeringTooltip }) {\r\n  const ref = useRef(null);\r\n  const tooltipHeight = useTooltipHeight(ref, flickeringTooltip);\r\n\r\n  let tooltipX = 0;\r\n  let tooltipY = 0;\r\n  if (targetRect !== null) {\r\n    tooltipX = targetRect.left;\r\n    tooltipY = targetRect.top - tooltipHeight;\r\n    if (tooltipY < 0) {\r\n      // It doesn't fit above, so place below.\r\n      tooltipY = targetRect.bottom;\r\n    }\r\n  }\r\n\r\n  // This artificially slows down rendering\r\n  let now = performance.now();\r\n  while (performance.now() - now < 100) {\r\n    // Do nothing for a bit...\r\n  }\r\n\r\n  return createPortal(\r\n    <TooltipContainer x={tooltipX} y={tooltipY} contentRef={ref}>\r\n      {children}\r\n    </TooltipContainer>,\r\n    document.querySelector(\".buttons-with-tooltip\")\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect\";\r\n\r\nexport function useTooltipHeight(ref, forceFlickering) {\r\n  const [tooltipHeight, setTooltipHeight] = useState(0);\r\n\r\n  // the tooltip “flickers” and you briefly see its initial position before\r\n  // the corrected position when useEffect is used.\r\n  useEffect(() => {\r\n    console.log(\"useTooltipHeight - useEffect\");\r\n    if (forceFlickering) {\r\n      const { height } = ref.current.getBoundingClientRect();\r\n      setTooltipHeight(height);\r\n    }\r\n  }, []);\r\n\r\n  useIsomorphicLayoutEffect(() => {\r\n    console.log(\r\n      \"useTooltipHeight - useIsomorphicLayoutEffect (useLayoutEffect)\"\r\n    );\r\n    if (!forceFlickering) {\r\n      const { height } = ref.current.getBoundingClientRect();\r\n      setTooltipHeight(height);\r\n    }\r\n  }, []);\r\n\r\n  return tooltipHeight;\r\n}\r\n","import { useState, useRef } from \"react\";\r\nimport Tooltip from \"./Tooltip\";\r\n\r\nexport default function ButtonWithTooltip({\r\n  tooltipContent,\r\n  flickeringTooltip,\r\n  ...rest\r\n}) {\r\n  const [targetRect, setTargetRect] = useState(null);\r\n  const buttonRef = useRef(null);\r\n  return (\r\n    <>\r\n      <button\r\n        {...rest}\r\n        ref={buttonRef}\r\n        onPointerEnter={() => {\r\n          // relative to viewport\r\n          // const rect = buttonRef.current.getBoundingClientRect();\r\n          // setTargetRect({\r\n          //   left: rect.left,\r\n          //   top: rect.top,\r\n          //   right: rect.right,\r\n          //   bottom: rect.bottom\r\n          // });\r\n\r\n          // relative to the nearest parent\r\n          const rect = buttonRef.current;\r\n          setTargetRect({\r\n            left: rect.offsetLeft,\r\n            top: rect.offsetTop,\r\n            right: rect.offsetLeft + rect.offsetWidth,\r\n            bottom: rect.offsetTop + rect.offsetHeight\r\n          });\r\n        }}\r\n        onPointerLeave={() => {\r\n          setTargetRect(null);\r\n        }}\r\n      />\r\n      {targetRect !== null && (\r\n        <Tooltip targetRect={targetRect} flickeringTooltip={flickeringTooltip}>\r\n          {tooltipContent}\r\n        </Tooltip>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import \"./index.css\";\r\nimport ButtonWithTooltip from \"./ButtonWithTooltip\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <div className=\"buttons-with-tooltip\">\r\n      <ButtonWithTooltip\r\n        tooltipContent={\r\n          <div>\r\n            This tooltip does not fit above the button.\r\n            <br />\r\n            This is why it's displayed below instead!\r\n          </div>\r\n        }\r\n      >\r\n        Hover over me (tooltip below)\r\n      </ButtonWithTooltip>\r\n\r\n      <div style={{ height: 50 }} />\r\n\r\n      <ButtonWithTooltip\r\n        tooltipContent={<div>This tooltip fits above the button</div>}\r\n        flickeringTooltip={false}\r\n      >\r\n        Hover over me (tooltip above)\r\n      </ButtonWithTooltip>\r\n\r\n      <div style={{ height: 50 }} />\r\n\r\n      <ButtonWithTooltip\r\n        tooltipContent={\r\n          <div>\r\n            This tooltip fits above the button.\r\n            <br />\r\n            But it flickers and you can see its initial position before the\r\n            corrected position as it uses \"useEffect\" rather than\r\n            useLayoutEffect\r\n          </div>\r\n        }\r\n        flickeringTooltip={true}\r\n      >\r\n        Hover over me (tooltip above)\r\n      </ButtonWithTooltip>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useImperativeHandle, useState } from \"react\";\r\n\r\nconst ForwardRefComponent = React.forwardRef((props, ref) => (\r\n  <div ref={ref}>{props.children}</div>\r\n));\r\n\r\nconst UseImperativeHandleComponent = (props) => {\r\n  const [count, setCount] = useState(0);\r\n  const [count2, setCount2] = useState(0);\r\n\r\n  useImperativeHandle(props.myRef3, () => ({\r\n    count: (value) => setCount(value)\r\n  }));\r\n\r\n  if (props.myRef4?.current) {\r\n    props.myRef4.current.count = (value) => {\r\n      setCount2(value);\r\n    };\r\n  }\r\n\r\n  const onClick = () => {\r\n    setCount(count + 1);\r\n    setCount2(count + 1);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button ref={props.myRef2} onClick={onClick}>\r\n        {props.children}\r\n      </button>\r\n      <br />\r\n      Count: {count}\r\n      <br />\r\n      Count2: {count2}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default function App() {\r\n  const myRef = useRef();\r\n  const myRef2 = useRef();\r\n  const myRef3 = useRef(\"valueToBeOverriden\");\r\n  const myRef4 = useRef({});\r\n\r\n  const onClick = () => {\r\n    myRef.current.textContent = \"ForwardRefComponent changed!\";\r\n    myRef2.current.textContent = \"UseImperativeHandleComponent changed!\";\r\n    console.log(\"myRef3.current\", myRef3.current);\r\n    myRef3.current.count(-1);\r\n    myRef4.current.count(-2);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <button onClick={onClick}>Click me!</button>\r\n      <br />\r\n      <br />\r\n      <ForwardRefComponent ref={myRef}>ForwardRefComponent</ForwardRefComponent>\r\n      <br />\r\n      <UseImperativeHandleComponent\r\n        myRef2={myRef2}\r\n        myRef3={myRef3}\r\n        myRef4={myRef4}\r\n      >\r\n        UseImperativeHandleComponent\r\n      </UseImperativeHandleComponent>\r\n    </div>\r\n  );\r\n}\r\n","import { memo } from \"react\";\r\nimport OptRrSimple from \"./optimize-rerender/Simple\";\r\nimport OptRrComplex from \"./optimize-rerender/Complex\";\r\nimport OptRrContext from \"./optimize-rerender/Context\";\r\nimport OptRrTypeChange from \"./optimize-rerender/TypeChange\";\r\nimport OptRrEventListener from \"./optimize-rerender/EventListener\";\r\nimport batchUpdate from \"./batch-update\";\r\nimport useEffectDependencies from \"./useEffect-dependencies\";\r\nimport ErrorBoundary from \"./error-boundary\";\r\nimport useReducer from \"./useReducer\";\r\nimport customHook from \"./custom-hook\";\r\nimport forwardRef from \"./forwardRef\";\r\n\r\nconst Topics = {\r\n  \"optimize-rerender-simple\": memo(OptRrSimple),\r\n  \"optimize-rerender-complex\": memo(OptRrComplex),\r\n  \"optimize-rerender-context\": memo(OptRrContext),\r\n  \"optimize-rerender-type-change (key)\": memo(OptRrTypeChange),\r\n  \"optimize-rerender-event-listener (useCallback, useMemo)\": memo(\r\n    OptRrEventListener\r\n  ),\r\n  \"batch-update\": memo(batchUpdate),\r\n  \"useEffect-dependencies\": memo(useEffectDependencies),\r\n  \"error-boundary\": memo(ErrorBoundary),\r\n  \"useReducer (useContext)\": memo(useReducer),\r\n  \"custom-hook (useLayoutEffect, createPortal)\": memo(customHook),\r\n  \"forwardRef (useImperativeHandle)\": memo(forwardRef)\r\n};\r\n\r\nexport default Topics;\r\n","import \"./styles.css\";\nimport { StrictMode, Fragment, useState, useEffect } from \"react\";\nimport Topics from \"./Topics\";\n\nfunction App() {\n  const [checkedTopics, setCheckedTopics] = useState(() => {\n    const savedCheckedTopics = window.localStorage.getItem(\"selected_topics\");\n    return savedCheckedTopics ? JSON.parse(savedCheckedTopics) : {};\n  });\n  const [selectedTopics, setSelectedTopics] = useState({});\n\n  const onTopicCheckboxToggle = (topic) => {\n    setCheckedTopics({\n      ...checkedTopics,\n      [topic]: checkedTopics[topic] ? false : true\n    });\n  };\n\n  useEffect(() => {\n    // to render a component after the checkbox UI (tick) is rendered\n    setSelectedTopics(checkedTopics);\n    window.localStorage.setItem(\n      \"selected_topics\",\n      JSON.stringify(checkedTopics)\n    );\n  }, [checkedTopics]);\n\n  return (\n    <div className=\"app\">\n      <div className=\"topic-chooser\">\n        <div className=\"topic-chooser__title\">Choose topics to see</div>\n        <ul>\n          {Object.entries(Topics).map(([topic, Component]) => (\n            <li key={topic} className=\"topic-chooser__option\">\n              <label>\n                <input\n                  type=\"checkbox\"\n                  checked={Boolean(checkedTopics[topic])}\n                  onChange={() => onTopicCheckboxToggle(topic)}\n                />\n                {topic}\n              </label>\n            </li>\n          ))}\n        </ul>\n      </div>\n      <div className=\"selected-topics\">\n        {Object.entries(Topics)\n          .filter(([topic, Component]) => selectedTopics[topic])\n          .map(([topic, Component]) => (\n            <Fragment key={topic}>\n              <Component />\n              <div className=\"selected-topics__divider\">\n                <hr />\n                <hr />\n              </div>\n            </Fragment>\n          ))}\n      </div>\n    </div>\n  );\n}\n\nexport default function AppWrapper() {\n  const [strictMode, setStrictMode] = useState(() => {\n    const savedStrictMode = window.localStorage.getItem(\"strict_mode\");\n    return savedStrictMode ? JSON.parse(savedStrictMode) : true;\n  });\n\n  const toggleStrictMode = () => {\n    setStrictMode(!strictMode);\n    window.localStorage.setItem(\"strict_mode\", !strictMode);\n  };\n\n  return (\n    <div className=\"app-wrapper\">\n      <div className=\"strict-mode-toggle\">\n        <label>\n          <input\n            type=\"checkbox\"\n            checked={strictMode}\n            onChange={toggleStrictMode}\n          />\n          StrictMode\n        </label>\n      </div>\n      <div className=\"app-wrapper__app\">\n        {strictMode ? (\n          <StrictMode>\n            <App />\n          </StrictMode>\n        ) : (\n          <App />\n        )}\n      </div>\n    </div>\n  );\n}\n","// import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  // <StrictMode>\n  <App />\n  // </StrictMode>\n);\n"],"sourceRoot":""}